<!--
Web Based Configuration Tool for WB40NBT/WB45NBT
Joe Conley, joe.conley@lairdtech.com
Version: 0.72
-->
<!DOCTYPE html>
<html>
<head>
<link rel="shortcut icon" href="/pics/laird_logo.png" type="image/x-icon" />
<style>
input.padding 
{
	margin:5px;
}
div.wrap 
{
	float: left;
	position: relative;
	left: 50%;
}
div.context
{
	float: center;
	position: relative;
	left: -50%;
}
div.toSubmit 
{
	float: right;
	position: relative;
	left: -38%;
}
</style>
</head>
<div style="text-align:center;">
<img src="/pics/laird_logo.png" alt="Laird Logo">
<br>
<br>
<table  align="center">
<tr>
<FORM METHOD="LINK" ACTION="/index.html" >
<td><INPUT TYPE="submit" VALUE="Status"></td>
</FORM>
<FORM METHOD="LINK" ACTION="/config.html" >
<td><INPUT TYPE="submit" VALUE="Profile Configuration"></td>
</FORM>
<FORM METHOD="LINK" ACTION="/global.html" >
<td><INPUT TYPE="submit" VALUE="Global Configuration"></td>
</FORM>
</tr>
</table>
<table  align="center">
<tr>
<form action = "" method = "post">
<td><INPUT class="padding" TYPE="submit" name="formEnable" value= "Enable Radio"/></td>
<td><INPUT class="padding" TYPE="submit" name="formDisable" value= "Disable Radio"/></td>
</form>
</tr>
</table>
<h3>WB Config</h3>
<h4>Select a profile to show/edit<h4>

<form action = "" method = "post">
<?php
exec('sdc_cli status', $sdcstatus);
$TitleStatus=ucwords(substr($sdcstatus[0],11));
if (strlen($TitleStatus) == 9)
{
	echo "<title>SCU - $TitleStatus</title>";
}
else
{
	echo "<title>SCU - Enabled</title>";
}
?>

<?php
exec("sdc_cli profile list | grep ACTIVE", $ActivePro);
exec("sdc_cli profile list", $prolist);
$listLen=count($prolist);
$editprofile=$_POST["wbprofiles"];
$editprofile=chop($editprofile,"ACTIVE");
echo "<select name='wbprofiles' multiple style='width:20%' size=10>";
foreach ($ActivePro as $ActivePro)
	{
		if  (chop($ActivePro,"ACTIVE") == $editprofile)
			{
				echo "<option selected>";
				echo "$ActivePro";
				echo "</option>";
			}
		else
			{
				echo "<option>";
				echo "$ActivePro";
				echo "</option>";
			}
	}
foreach ($prolist as $prolist)
{
	if ($prolist != $ActivePro)
	{
		if ($prolist == $editprofile)
			{
				echo "<option selected>";
				echo "$prolist";
				echo "</option>";
			}
		else
			{
				echo "<option>";
				echo "$prolist";
				echo "</option>";
			}
	}
}
echo "</select>";
echo " ";
?>
<br>
<INPUT class="padding" TYPE="submit" name="formActivate" value= "Activate"/>
<INPUT class="padding" TYPE="submit" name="formEdit" value= "Edit"/>
<INPUT class="padding" TYPE="submit" name="formAdd" value= "Add"/>
<INPUT class="padding" TYPE="submit" name="formScan" value= "Scan"/>
<br>
<INPUT class="padding" TYPE="submit" name="formShow" value= "Show"/>
<INPUT class="padding" TYPE="submit" name="formRemove" value= "Remove"/>
<INPUT class="padding" TYPE="submit" name="formRename" value= "Rename"/>
<br>
</form>
</div>
<br>
<div class="wrap">
<div class="context">
<?php

if (isset($_POST['formDisable']))
{
	exec("sdc_cli disable");
	echo "Disabling Radio";
	echo "<form id=refresh action='' method = 'post'>";
	echo "</form>";
	echo "<script>document.getElementById('refresh').submit();</script>";
}
if (isset($_POST['formEnable']))
{
	exec("sdc_cli enable");
	echo "Enabling Radio";
	echo "<form id=refresh action='' method = 'post'>";
	echo "</form>";
	echo "<script>document.getElementById('refresh').submit();</script>";
}
if (isset($_POST['formAdd']))
{
?>
	<form name='subAdd' action='' method='post'>
	Enter a unique name for this profile: <input type='text' name='NewProfile' value=''>
	<input type='submit' name='subAdded' value= 'Submit'>
	</form>
	<br>
<?php
}
if (isset($_POST['subAdded']))
{
?>
	<input type = "hidden" name = "NewProfile" value = "<?php echo $_POST['NewProfile']; ?>"/>
<?php
	$NewProfile=$_POST["NewProfile"];
	if (strlen($NewProfile) == 0)
	{
		?>
		<script>
		alert("Failed to add profile:\nProfile name must contain\nat least one character.");
		</script>
		<?php
	}
	else
	{
		exec("sdc_cli profile list", $prolist);
		$listlength=sizeof($prolist);
		$templength=0;
		foreach ($prolist as $prolisted)
		{
			$rawprofile=chop($prolisted,"ACTIVE");
			if (strcasecmp($rawprofile,$NewProfile) != 0)
			{
				$templength++;	
			}
		}
		if ($listlength == $templength)
		{
			exec("sdc_cli profile $NewProfile add");
			echo "Adding profile $NewProfile";
			$editprofile=$NewProfile;
			echo "<form id=refresh action='' method = 'post'>";
			echo "<input type = 'hidden' name = 'wbprofiles' value = '$editprofile' />";
			echo "<input type = 'hidden' name = 'formEdit' value = '$formeditprofile' />";
			echo "</form>";
			echo "<script>document.getElementById('refresh').submit();</script>";
		}
		else
		{
			?>
			<script>
			alert("Failed to add profile:\nProfile name not unique");
			</script>
			<?php
		}
	}
	echo "<form id=refresh action='' method = 'post'>";
	echo "</form>";
	echo "<script>document.getElementById('refresh').submit();</script>";
}
if (isset($_POST['formShow']))
{
	$wbprofilename=$_POST["wbprofiles"];
	$wbprofilename=chop($wbprofilename, "ACTIVE");
	if ($wbprofilename == "")
	{
		$wbprofilename=chop($ActivePro, "ACTIVE");
	}
	exec("sdc_cli profile $wbprofilename show", $printPro);
	foreach ($printPro as $printPro)
	{
		echo "$printPro";
		echo "<br>";
	}
}
if (isset($_POST['formRename']))
{
	$wbprofilename=$_POST["wbprofiles"];
	$wbprofilename=chop($wbprofilename, "ACTIVE");
	$editprofile=$wbprofilename;
	if ($editprofile == "")
	{
		$editprofile=chop($ActivePro, "ACTIVE");
	}
	//exec("sdc_cli profile $wbprofilename show", $ProfilePrint);
	echo "<br>";
	echo "What would you like to rename $editprofile to?";
	echo "<br>";
	echo "<br>";
	?>
	<div style="text-align:center;">
	<form name='testEdit' action='' method='post'>
	<?php
	echo "<input type='text' name='renamed' value='$editprofile'>";
	?>
	<input type = "hidden" name = "wbprofiles" value = "<?php echo $_POST['wbprofiles']; ?>"/>
	<input type='submit' name='EditRename' value= 'Submit'>
	</form>
	</div>
	<?php
}
if (isset($_POST['EditRename']))
{
	$editprofile=$_POST["wbprofiles"];
	$editprofile=chop($editprofile, "ACTIVE");
	$renamed=$_POST["renamed"];	
	if( $editprofile != $renamed)
	{
		if( strlen($renamed) != 0 )
		{
			if ($renamed != " ")	
			{	
				exec("sdc_cli profile $editprofile rename $renamed");
				echo "$editprofile has been renamed to $renamed";
			}
			else
			{
				?>
				<script>
				alert("Profile name cannot be blank");
				</script>
				<?php
			}
		}
		else
		{
			?>
			<script>
			alert("Profile name cannot be blank");
			</script>
			<?php
		}
	}
	else
	{
		?>
		<script>
		alert("Cannot rename to same name");
		</script>
		<?php	
	}

	echo '<meta http-equiv="refresh" content="1">';
	echo "<br>";

}
if (isset($_POST['formActivate']))
{
	$wbprofilename=$_POST["wbprofiles"];
	$wbprofilename=chop($wbprofilename, "ACTIVE");
	if ($wbprofilename == "")
	{
		$wbprofilename=chop($ActivePro, "ACTIVE");
	}
	echo "Activating profile $wbprofilename";
	exec("sdc_cli profile $wbprofilename activate", $ActivateOK);
	echo '<meta http-equiv="refresh" content="0">';
}
if (isset($_POST['formRemove']))
{
	$wbprofilename=$_POST["wbprofiles"];
	if ($wbprofilename == "")
	{
		$wbprofilename=chop($ActivePro, "ACTIVE");
	}
	if ($wbprofilename == chop($ActivePro, "ACTIVE"))
	{
		?>
		<script>
		alert("Error:\nCan not delete active profile");
		</script>
		<?php	
		echo '<meta http-equiv="refresh" content="0">';	
	}
	elseif ($wbprofilename == $ActivePro)
	{
		?>
		<script>
		alert("Error:\nCan not delete active profile");
		</script>
		<?php	
		echo '<meta http-equiv="refresh" content="0">';	
	}
	else
	{
		echo $wbprofilename;
		echo "Removing profile $wbprofilename";
		exec("sdc_cli profile $wbprofilename delete");
		echo '<meta http-equiv="refresh" content="0">';
	}
}
if (isset($_POST['formScan']))
{
	exec("sdc_cli scan > sdccliscan &", $printScan);
	echo "<form id=refresh action='' method = 'post'>";
	?><input type = "hidden" name = "formScanLoad" value = "formScanLoad"/><?php
	echo "<script>document.getElementById('refresh').submit();</script>";
}
if (isset($_POST['formScanLoad']))
{
	echo "Scanning, Please wait.";
	?>
	<br>
	<script>
	document.write("<progress></progress>");
	</script>
	<form id=refresh action='' method = 'post'>
	<input type = "hidden" name = "formScanAdd" value = "formScanAdd"/>
	<script>
	 setTimeout(function(){document.getElementById('refresh').submit()},8000);
	</script>
	<?php
}
if (isset($_POST['formScanAdd']))
{
	echo "Select a SSID and a new profile name:";
	echo "<br>";
	$count=0;
	$valueSSID=1;
	$valueRSSI=5;
	$printScan=file("sdccliscan");
	echo "<br>";
	echo "<form name='ScanADD' action='' method='post' style='text-align:center;'>";
	echo "<select name='ScanList' multiple>";
	while ($count < count($printScan)/8)
	{
		if (substr($printScan[$valueSSID],0,6) == "SSID: " && substr($printScan[$valueRSSI],0,6) == "RSSI: ")
		{
			$realSSID=substr($printScan[$valueSSID],6);
			$realRSSI=substr($printScan[$valueRSSI],6);
			echo "<option value='$realSSID'>$realSSID @ $realRSSI</option>";
		}	
		$valueSSID = $valueSSID + 8;
		$valueRSSI = $valueRSSI + 8;
	$count=$count + 1;
	}
	echo "</select>";
	?>
	<br>
	<br>
	Enter a unique name for this profile: 
	<br>
	<input type='text' name='NewProfile'>
	<br>
	<br>
	<?php
	echo "<input class='ScanSub' type='submit' name='ScanSub' value= 'Submit' style='text-align:center;'>";
	echo "</form>";
}
if (isset($_POST['ScanSub']))
{
	?>
	<input type = "hidden" name = "ScanList" value = "<?php echo $_POST['ScanList']; ?>"/>
	<input type = "hidden" name = "NewProfile" value = "<?php echo $_POST['NewProfile']; ?>"/>
	<?php
	$ScanList=$_POST['ScanList'];
	$NewProfile=$_POST["NewProfile"];
	echo "<br>";
	if (strlen($NewProfile) == 0)
	{
		?>
		<script>
		alert("Failed to add profile:\nProfile name must contain\nat least one character.");
		</script>
		<?php
	}
	else
	{
		exec("sdc_cli profile list", $prolist);
		$listlength=sizeof($prolist);
		$templength=0;
		foreach ($prolist as $prolisted)
		{
			$rawprofile=chop($prolisted,"ACTIVE");
			if (strcasecmp($rawprofile,$NewProfile) != 0)
			{
				$templength++;	
			}
		}
		if ($listlength == $templength)
		{
			exec("sdc_cli profile $NewProfile add");
			exec("sdc_cli profile $NewProfile set ssid $ScanList");
			echo "Adding profile $NewProfile with SSID of $ScanList";
			$editprofile=$NewProfile;
			echo "<form id=refresh action='' method = 'post'>";
			echo "<input type = 'hidden' name = 'wbprofiles' value = '$editprofile' />";
			echo "<input type = 'hidden' name = 'formEdit' value = '$formeditprofile' />";
			echo "</form>";
			echo "<script>document.getElementById('refresh').submit();</script>";
		}
		else
		{
			?>
			<script>
			alert("Failed to add profile:\nProfile name not unique");
			</script>
			<?php
		}
	}
	exec("rm sdccliscan");
}
if (isset($_POST['formEdit']))
{
	$wbprofilename=$_POST["wbprofiles"];
	$wbprofilename=chop($wbprofilename, "ACTIVE");
	$editprofile=$wbprofilename;	
	if ($wbprofilename == "")
	{
		$wbprofilename=chop($ActivePro, "ACTIVE");
	}
	exec("sdc_cli profile $wbprofilename show", $ProfilePrint);

	if (isset($_POST['EditSub']))
	{
		echo "Editing Config. Please wait.";
		echo "<br>";
	}
	else
	{
		echo "Edit profile $wbprofilename:";
		echo "<br>";
	}

	echo "<br>";
	echo "<form name='testEdit' action='' method='post'>";
	
	$getSSID=substr($ProfilePrint[1], 10);
	echo "SSID: <input type='text' name='SSID' value='$getSSID'>";
	echo "<br>";
	
	$getClient=substr($ProfilePrint[2], 17);	
	echo "Client Name: <input type='text' name='ClientName' value='$getClient'>";
	echo "<br>";

	$getTX=substr($ProfilePrint[3],13);
	if ($getTX == "0")
	{
		echo "TX Power:<select name='TxPower'>";
		echo "<option selected>0-Auto</option>";
		echo "<option>1</option>";
		echo "<option>5</option>";
		echo "<option>10</option>";
		echo "<option>20</option>";
		echo "<option>30</option>";
		echo "<option>50</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getTX == "1")
	{
		echo "TX Power:<select name='TxPower'>";
		echo "<option>0-Auto</option>";
		echo "<option selected>1</option>";
		echo "<option>5</option>";
		echo "<option>10</option>";
		echo "<option>20</option>";
		echo "<option>30</option>";
		echo "<option>50</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getTX == "5")
	{
		echo "TX Power:<select name='TxPower'>";
		echo "<option>0-Auto</option>";
		echo "<option>1</option>";
		echo "<option selected>5</option>";
		echo "<option>10</option>";
		echo "<option>20</option>";
		echo "<option>30</option>";
		echo "<option>50</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getTX == "10")
	{
		echo "TX Power:<select name='TxPower'>";
		echo "<option>0-Auto</option>";
		echo "<option>1</option>";
		echo "<option>5</option>";
		echo "<option selected>10</option>";
		echo "<option>20</option>";
		echo "<option>30</option>";
		echo "<option>50</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getTX == "20")
	{
		echo "TX Power:<select name='TxPower'>";
		echo "<option>0-Auto</option>";
		echo "<option>1</option>";
		echo "<option>5</option>";
		echo "<option>10</option>";
		echo "<option selected>20</option>";
		echo "<option>30</option>";
		echo "<option>50</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getTX == "30")
	{
		echo "TX Power:<select name='TxPower'>";
		echo "<option>0-Auto</option>";
		echo "<option>1</option>";
		echo "<option>5</option>";
		echo "<option>10</option>";
		echo "<option>20</option>";
		echo "<option selected>30</option>";
		echo "<option>50</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getTX == "50")
	{
		echo "TX Power:<select name='TxPower'>";
		echo "<option>0-Auto</option>";
		echo "<option>1</option>";
		echo "<option>5</option>";
		echo "<option>10</option>";
		echo "<option>20</option>";
		echo "<option>30</option>";
		echo "<option selected>50</option>";
		echo "</select>";
		echo "<br>";
	}
	else
	{
		echo "TX Power:<select name='TxPower'>";
		echo "<option>0-Auto</option>";
		echo "<option>1</option>";
		echo "<option>5</option>";
		echo "<option>10</option>";
		echo "<option>20</option>";
		echo "<option>30</option>";
		echo "<option>50</option>";
		echo "</select>";
		echo "<br>";
	}

	$getAuth=substr($ProfilePrint[4],15);
	if ($getAuth == "open")
	{
		echo "Auth Type:<select name='AuthType'>";
		echo "<option value='open' selected>Open</option>";
		echo "<option value='shared'>Shared</option>";
		echo "<option value='eap'>Network EAP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getAuth == "shared")
	{
		echo "Auth Type:<select name='AuthType'>";
		echo "<option value='open'>Open</option>";
		echo "<option value='shared' selected>Shared</option>";
		echo "<option value='eap'>Network EAP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getAuth == "network EAP")
	{
		echo "Auth Type:<select name='AuthType'>";
		echo "<option value='open'>Open</option>";
		echo "<option value='shared'>Shared</option>";
		echo "<option value='eap' selected>Network EAP</option>";
		echo "</select>";
		echo "<br>";
		$getAuth="eap";
	}
	else
	{
		echo "Auth Type:<select name='AuthType'>";
		echo "<option value='open'>Open</option>";
		echo "<option value='shared'>Shared</option>";
		echo "<option value='eap'>Network EAP</option>";
		echo "</select>";
		echo "<br>";
	}

	$getEAP=substr($ProfilePrint[5],14);
	if ($getEAP == "leap")
	{
		echo "EAP Type:<select name='EapType'>";
		echo "<option>none</option>";
		echo "<option selected>leap</option>";
		echo "<option>eap-fast</option>";
		echo "<option>peap-mschap</option>";
		echo "<option>peap-gtc</option>";
		echo "<option>eap-tls</option>";
		echo "<option>eap-ttls</option>";
		echo "<option>peap-tls</option>";
		echo "</select>";
		echo "<br>";

	}
	elseif ($getEAP == "eap-fast")
	{
		echo "EAP Type:<select name='EapType'>";
		echo "<option>none</option>";
		echo "<option>leap</option>";
		echo "<option selected>eap-fast</option>";
		echo "<option>peap-mschap</option>";
		echo "<option>peap-gtc</option>";
		echo "<option>eap-tls</option>";
		echo "<option>eap-ttls</option>";
		echo "<option>peap-tls</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getEAP == "peap-mschap")
	{
		echo "EAP Type:<select name='EapType'>";
		echo "<option>none</option>";
		echo "<option>leap</option>";
		echo "<option>eap-fast</option>";
		echo "<option selected>peap-mschap</option>";
		echo "<option>peap-gtc</option>";
		echo "<option>eap-tls</option>";
		echo "<option>eap-ttls</option>";
		echo "<option>peap-tls</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getEAP == "peap-gtc")
	{
		echo "EAP Type:<select name='EapType'>";
		echo "<option>none</option>";
		echo "<option>leap</option>";
		echo "<option>eap-fast</option>";
		echo "<option>peap-mschap</option>";
		echo "<option selected>peap-gtc</option>";
		echo "<option>eap-tls</option>";
		echo "<option>eap-ttls</option>";
		echo "<option>peap-tls</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getEAP == "tls")
	{
		echo "EAP Type:<select name='EapType'>";
		echo "<option>none</option>";
		echo "<option>leap</option>";
		echo "<option>eap-fast</option>";
		echo "<option>peap-mschap</option>";
		echo "<option>peap-gtc</option>";
		echo "<option value='tls' selected>eap-tls</option>";
		echo "<option>eap-ttls</option>";
		echo "<option>peap-tls</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getEAP == "ttls")
	{
		echo "EAP Type:<select name='EapType'>";
		echo "<option>none</option>";
		echo "<option>leap</option>";
		echo "<option>eap-fast</option>";
		echo "<option>peap-mschap</option>";
		echo "<option>peap-gtc</option>";
		echo "<option>eap-tls</option>";
		echo "<option selected>eap-ttls</option>";
		echo "<option>peap-tls</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getEAP == "peap-tls")
	{
		echo "EAP Type:<select name='EapType'>";
		echo "<option>none</option>";
		echo "<option>leap</option>";
		echo "<option>eap-fast</option>";
		echo "<option>peap-mschap</option>";
		echo "<option>peap-gtc</option>";
		echo "<option>eap-tls</option>";
		echo "<option>eap-ttls</option>";
		echo "<option selected>peap-tls</option>";
		echo "</select>";
		echo "<br>";
	}
	else
	{
		echo "EAP Type:<select name='EapType'>";
		echo "<option selected>none</option>";
		echo "<option>leap</option>";
		echo "<option>eap-fast</option>";
		echo "<option>peap-mschap</option>";
		echo "<option>peap-gtc</option>";
		echo "<option>eap-tls</option>";
		echo "<option>eap-ttls</option>";
		echo "<option>peap-tls</option>";
		echo "</select>";
		echo "<br>";
	}

	$getWEP=substr($ProfilePrint[6],14);
	if ($getWEP == "wep-off")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off' selected>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "wep-on")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' selected>on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "wep-auto")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' selected>auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "wpa-psk-tkip")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' selected>WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "wpa-tkip")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' selected>WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "wpa2-psk-aes")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' selected>WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "wpa2-aes")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' selected>WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "cckm-tkip")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' selected>CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "cckm-aes")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' selected>CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "wpa-psk-aes")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' selected>WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "wpa-aes")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' selected>WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "wpa2-psk-tkip")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' selected>WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getWEP == "wpa2-tkip")
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' selected>WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}
	else
	{
		echo "WEP Type:<select name='WepType'>";
		echo "<option value='off'>off</option>";
		echo "<option value='on' >on</option>";
		echo "<option value='auto' >auto</option>";
		echo "<option value='WPA_PSK' >WPA_PSK</option>";
		echo "<option value='WPA_TKIP' >WPA_TKIP</option>";
		echo "<option value='WPA2_PSK' >WPA2_PSK</option>";
		echo "<option value='WPA2_AES' >WPA2_AES</option>";
		echo "<option value='CCKM_TKIP' >CCKM_TKIP</option>";
		echo "<option value='CCKM_AES' >CCKM_AES</option>";
		echo "<option value='WPA_PSK_AES' >WPA_PSK_AES</option>";
		echo "<option value='WPA_AES' >WPA_AES</option>";
		echo "<option value='WPA2_PSK_TKIP' >WPA2_PSK_TKIP</option>";
		echo "<option value='WPA2_TKIP' >WPA2_TKIP</option>";
		echo "</select>";
		echo "<br>";
	}

	$getBIT=substr($ProfilePrint[7],13);
	if ($getBIT == "auto")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto' selected>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "1 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option selected>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "2 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option selected>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "5.5 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option selected>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "6 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option selected>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "9 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option selected>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "11 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option selected>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "12 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option selected>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "18 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option selected>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "24 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option selected>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "36 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option selected>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "48 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option selected>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getBIT == "54 Mbps")
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option selected>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	else
	{
		echo "Bit Rate:<select name='BitRate'>";
		echo "<option value='auto'>Auto</option>";
		echo "<option>1 Mbps</option>";
		echo "<option>2 Mbps</option>";
		echo "<option>5.5 Mbps</option>";
		echo "<option>6 Mbps</option>";
		echo "<option>9 Mbps</option>";
		echo "<option>11 Mbps</option>";
		echo "<option>12 Mbps</option>";
		echo "<option>18 Mbps</option>";
		echo "<option>24 Mbps</option>";
		echo "<option>36 Mbps</option>";
		echo "<option>48 Mbps</option>";
		echo "<option>54 Mbps</option>";
		echo "</select>";
		echo "<br>";
	}
	
	$getMODE=substr($ProfilePrint[8],10);
	if ($getMODE == "B only")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option selected>B only</option>";
		echo "<option>BG</option>";
		echo "<option>G only</option>";
		echo "<option>A only</option>";
		echo "<option>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option>GN</option>";
		echo "<option>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getMODE == "BG")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option selected>BG</option>";
		echo "<option>G only</option>";
		echo "<option>A only</option>";
		echo "<option>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option>GN</option>";
		echo "<option>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getMODE == "G")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option>BG</option>";
		echo "<option selected>G only</option>";
		echo "<option>A only</option>";
		echo "<option>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option>GN</option>";
		echo "<option>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getMODE == "A")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option>BG</option>";
		echo "<option>G only</option>";
		echo "<option selected>A only</option>";
		echo "<option>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option>GN</option>";
		echo "<option>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getMODE == "ABG")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option>BG</option>";
		echo "<option>G only</option>";
		echo "<option>A only</option>";
		echo "<option selected>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option>GN</option>";
		echo "<option>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getMODE == "BGA")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option>BG</option>";
		echo "<option>G only</option>";
		echo "<option>A only</option>";
		echo "<option>ABG</option>";
		echo "<option selected>BGA</option>";
		echo "<option>GN</option>";
		echo "<option>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getMODE == "GN")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option>BG</option>";
		echo "<option>G only</option>";
		echo "<option>A only</option>";
		echo "<option>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option selected>GN</option>";
		echo "<option>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getMODE == "AN")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option>BG</option>";
		echo "<option>G only</option>";
		echo "<option>A only</option>";
		echo "<option>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option>GN</option>";
		echo "<option selected>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getMODE == "ABGN")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option>BG</option>";
		echo "<option>G only</option>";
		echo "<option>A only</option>";
		echo "<option>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option>GN</option>";
		echo "<option>AN</option>";
		echo "<option selected>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getMODE == "BGAN")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option>BG</option>";
		echo "<option>G only</option>";
		echo "<option>A only</option>";
		echo "<option>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option>GN</option>";
		echo "<option>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option selected>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getMODE == "ad-hoc")
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option>BG</option>";
		echo "<option>G only</option>";
		echo "<option>A only</option>";
		echo "<option>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option>GN</option>";
		echo "<option>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option selected>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}
	else
	{
		echo "Radio Mode:<select name='Mode'>";
		echo "<option>B only</option>";
		echo "<option>BG</option>";
		echo "<option>G only</option>";
		echo "<option>A only</option>";
		echo "<option>ABG</option>";
		echo "<option>BGA</option>";
		echo "<option>GN</option>";
		echo "<option>AN</option>";
		echo "<option>ABGN</option>";
		echo "<option>BGAN</option>";
		echo "<option>ad-hoc</option>";
		echo "</select>";
		echo "<br>";
	}

	$getPower=substr($ProfilePrint[9],15);
	if ($getPower == "off")
	{
		echo "Power Save:<select name='PowerSave'>";
		echo "<option selected>off</option>";
		echo "<option>max</option>";
		echo "<option>fast</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getPower == "max")
	{
		echo "Power Save:<select name='PowerSave'>";
		echo "<option>off</option>";
		echo "<option selected>max</option>";
		echo "<option>fast</option>";
		echo "</select>";
		echo "<br>";
	}
	elseif ($getPower == "fast")
	{
		echo "Power Save:<select name='PowerSave'>";
		echo "<option>off</option>";
		echo "<option>max</option>";
		echo "<option selected>fast</option>";
		echo "</select>";
		echo "<br>";
	}
	else
	{
		echo "Power Save:<select name='PowerSave'>";
		echo "<option>off</option>";
		echo "<option>max</option>";
		echo "<option>fast</option>";
		echo "</select>";
		echo "<br>";
	}

	//Figure out what creds are needed

	if ($getEAP == "leap")  //leap
	{
		$getUser=substr($ProfilePrint[10],14);
		$getPass="********";	
		echo "User Name: <input type='text' name='UserName' value='$getUser'>";
		echo "<br>";
		echo "Password: <input type='password' name='PassWord' value='$getPass'>";
		echo "<br>";
	}
	elseif ($getEAP == "eap-fast") //eap-fast
	{
		$getUser=substr($ProfilePrint[10],14);
		$getPass="********";
		$getPacFile=substr($ProfilePrint[12],18);
		$getPacPass="********";	
		echo "User Name: <input type='text' name='UserName' value='$getUser'>";
		echo "<br>";
		echo "Password: <input type='password' name='PassWord' value='$getPass'>";
		echo "<br>";
		echo "PAC Filename: <input type='text' name='PacFileName' value='$getPacFile'>";
		echo "<br>";
		echo "PAC Password: <input type='password' name='PacPassword' value='$getPacPass'>";
		echo "<br>";
	}
	elseif ($getEAP == "peap-mschap") //peap-mschap
	{
		$getUser=substr($ProfilePrint[10],14);
		$getPass="********";
		$getCAFile=substr($ProfilePrint[12],12);
		echo "User Name: <input type='text' name='UserName' value='$getUser'>";
		echo "<br>";
		echo "Password: <input type='password' name='PassWord' value='$getPass'>";
		echo "<br>";
		echo "CAcert File: <input type='text' name='CaCert' value='$getCAFile'>";
		echo "<br>";
	}
	elseif ($getEAP == "peap-gtc") //peap-gtc
	{
		$getUser=substr($ProfilePrint[10],14);
		$getPass="********";
		$getCAFile=substr($ProfilePrint[12],12);
		echo "User Name: <input type='text' name='UserName' value='$getUser'>";
		echo "<br>";
		echo "Password: <input type='password' name='PassWord' value='$getPass'>";
		echo "<br>";
		echo "CAcert File: <input type='text' name='CaCert' value='$getCAFile'>";
		echo "<br>";
	}
	elseif ($getEAP == "tls") //eap-tls
	{
		$getUser=substr($ProfilePrint[10],14);
		$getUserCertFile=substr($ProfilePrint[11],15);
		$getUserCertPass="********";
		$getCAFile=substr($ProfilePrint[12],12);
		echo "User Name: <input type='text' name='UserName' value='$getUser'>";
		echo "<br>";
		echo "Usercert File: <input type='text' name='UserCert' value='$getUserCertFile'>";
		echo "<br>";
		echo "Usercert Password: <input type='password' name='UserCertPass' value='$getUserCertPass'>";
		echo "<br>";
		echo "CAcert File: <input type='text' name='CaCert' value='$getCAFile'>";
		echo "<br>";
	}
	elseif ($getEAP == "ttls") //eap-ttls
	{
		$getUser=substr($ProfilePrint[10],14);
		$getPass="********";
		$getCAFile=substr($ProfilePrint[12],12);
		echo "User Name: <input type='text' name='UserName' value='$getUser'>";
		echo "<br>";
		echo "Password: <input type='password' name='PassWord' value='$getPass'>";
		echo "<br>";
		echo "CAcert File: <input type='text' name='CaCert' value='$getCAFile'>";
		echo "<br>";	
	}
	elseif ($getEAP == "peap-tls") //peap-tls
	{
		$getUser=substr($ProfilePrint[10],14);
		$getUserCertFile=substr($ProfilePrint[11],15);
		$getUserCertPass="********";
		$getCAFile=substr($ProfilePrint[12],12);
		echo "User Name: <input type='text' name='UserName' value='$getUser'>";
		echo "<br>";
		echo "Usercert File: <input type='text' name='UserCert' value='$getUserCertFile'>";
		echo "<br>";
		echo "Usercert Password: <input type='password' name='UserCertPass' value='$getUserCertPass'>";
		echo "<br>";
		echo "CAcert File: <input type='text' name='CaCert' value='$getCAFile'>";
		echo "<br>";	
	}
	else //none
	{
		
	}

	// Prompt for PSK/WEP if required
	if ($getWEP == "off") //off
	{

	}
	elseif ($getWEP == "wep-on") //on
	{
		$getWEPKey1=substr($ProfilePrint[10],14);
		$getWEPKey2=substr($ProfilePrint[11],14);
		$getWEPKey3=substr($ProfilePrint[12],14);	
		$getWEPKey4=substr($ProfilePrint[13],14);
	
		if (str_word_count($getWEPKey1) == 1)
		{
			$getWEPKey1=substr($getWEPKey1,3);
			$GetActiveKey=1;
		}
		if (str_word_count($getWEPKey2) == 1)
		{
			$getWEPKey2=substr($getWEPKey2,3);
			$GetActiveKey=2;
		}
		if (str_word_count($getWEPKey3) == 1)
		{
			$getWEPKey3=substr($getWEPKey3,3);
			$GetActiveKey=3;
		}
		if (str_word_count($getWEPKey4) == 1)
		{
			$getWEPKey4=substr($getWEPKey4,3);
			$GetActiveKey=4;
		}

		echo "Index 1: <input type='password' name='WepKey1' value='$getWEPKey1'>";
		echo "<br>";

		echo "Index 2: <input type='password' name='WepKey2' value='$getWEPKey2'>";
		echo "<br>";

		echo "Index 3: <input type='password' name='WepKey3' value='$getWEPKey3'>";
		echo "<br>";

		echo "Index 4: <input type='password' name='WepKey4' value='$getWEPKey4'>";
		echo "<br>";

		if ($GetActiveKey == 1)
		{
			echo "Set Active Key:<select name='KeyIndex'>";
			echo "<option selected>1</option>";
			echo "<option>2</option>";
			echo "<option>3</option>";
			echo "<option>4</option>";
			echo "</select>";
			echo "<br>";	
		}
		else if ($GetActiveKey == 2)
		{
			echo "Set Active Key:<select name='KeyIndex'>";
			echo "<option>1</option>";
			echo "<option selected>2</option>";
			echo "<option>3</option>";
			echo "<option>4</option>";
			echo "</select>";
			echo "<br>";	
		}
		else if ($GetActiveKey == 3)
		{
			echo "Set Active Key:<select name='KeyIndex'>";
			echo "<option>1</option>";
			echo "<option>2</option>";
			echo "<option selected>3</option>";
			echo "<option>4</option>";
			echo "</select>";
			echo "<br>";	
		}	
		else if ($GetActiveKey == 4)
		{
			echo "Set Active Key:<select name='KeyIndex'>";
			echo "<option>1</option>";
			echo "<option>2</option>";
			echo "<option>3</option>";
			echo "<option selected>4</option>";
			echo "</select>";
			echo "<br>";	
		}	
	}
	elseif ($getWEP == "auto") //auto
	{

	}
	elseif ($getWEP == "wpa-psk-tkip") //wpa_psk
	{
		$getPSK=substr($ProfilePrint[10],9);	
		echo "PreShared Key: <input type='password' name='PSK' value='$getPSK'>";
	}
	elseif ($getWEP == "a54cc87bb5fec794c6fd1446d9f8b77a") //wpa_tkip
	{

	}
	elseif ($getWEP == "wpa2-psk-aes") //wpa2_psk
	{
		$getPSK=substr($ProfilePrint[10],9);	
		echo "PreShared Key: <input type='password' name='PSK' value='$getPSK'>";
	}
	elseif ($getWEP == "wpa2-aes") //wpa2_aes
	{

	}
	elseif ($getWEP == "cckm_tkip") //cckm_tkip
	{

	}
	elseif ($getWEP == "cckm-aes") //cckm_aes
	{

	}
	elseif ($getWEP == "wpa-psk-aes") //wpa_psk_aes
	{
		$getPSK=substr($ProfilePrint[10],9);	
		echo "PreShared Key: <input type='password' name='PSK' value='$getPSK'>";
	}
	elseif ($getWEP == "wpa-aes") //wpa_aes
	{

	}
	elseif ($getWEP == "wpa2-psk-tkip") //wpa2_psk_tkp
	{
		$getPSK=substr($ProfilePrint[10],9);	
		echo "PreShared Key: <input type='password' name='PSK' value='$getPSK'>";
	}
	elseif ($getWEP == "wpa2-tkip") //wpa2_tkip
	{

	}
	else
	{

	}
?>
	<input type = "hidden" name = "wbprofiles" value = "<?php echo $_POST['wbprofiles']; ?>"/>
	<input type = "hidden" name = "formEdit" value = "<?php echo $_POST['formEdit']; ?>"/>
	<br>
	<br>
	<div class="toSubmit">
	<input type='submit' name='EditSub' value= 'Submit'>
	<div>
	</form>
<?php
}
if (isset($_POST['EditSub']))
{

	$editprofile=$_POST["wbprofiles"];
	$editprofile=chop($editprofile, "ACTIVE");
	$formeditprofile=$_POST["formEdit"];
	$Name=$_POST["Name"];
	$SSID=$_POST["SSID"];
	$AuthType=$_POST["AuthType"];
	$ClientName=$_POST["ClientName"];
	$TxPower=$_POST["TxPower"];
	$EapType=$_POST["EapType"];
	$WepType=$_POST["WepType"];
	$BitRate=$_POST["BitRate"];
	$Mode=$_POST["Mode"];
	$PowerSave=$_POST["PowerSave"];
	$UserName=$_POST["UserName"];
	$PassWord=$_POST["PassWord"];
	$PacFileName=$_POST["PacFileName"];
	$PacPassword=$_POST["PacPassword"];
	$UserCert=$_POST["UserCert"];
	$UserCertPass=$_POST["UserCertPass"];
	$CaCert=$_POST["CaCert"];
	$WepKey1=$_POST["WepKey1"];
	$WepKey2=$_POST["WepKey2"];
	$WepKey3=$_POST["WepKey3"];
	$WepKey4=$_POST["WepKey4"];
	$KeyIndex=$_POST["KeyIndex"];
	$PSK=$_POST["PSK"];

	if ($SSID != $getSSID)
	{
		exec("sdc_cli profile $editprofile set ssid $SSID", $error);
	}
	if ($ClientName != $getClient)
	{
		exec("sdc_cli profile $editprofile set clientname $ClientName", $error);
	}
	if ($TxPower != $getTX )
	{
		exec("sdc_cli profile $editprofile set txpower $TxPower", $error);
	}
	if ($AuthType != $getAuth)
	{
		exec("sdc_cli profile $editprofile set authtype $AuthType", $error);
	}
	if ($WepType != $getWEP)
	{
		exec("sdc_cli profile $editprofile set weptype $WepType", $error);
	}	
	if ($EapType != $getEAP)
	{
		exec("sdc_cli profile $editprofile set eaptype $EapType", $error);
	}
	if ($BitRate != $getBIT)
	{
		exec("sdc_cli profile $editprofile set bitrate $BitRate", $error);
	}
	if ($Mode != $getMODE)
	{
		exec("sdc_cli profile $editprofile set mode $Mode", $error);
	}
	if ($PowerSave != $getPower)
	{
		exec("sdc_cli profile $editprofile set powersave $PowerSave", $error);
	}
	if ($UserName != $getUser)
	{
		exec("sdc_cli profile $editprofile set user $UserName", $error);
	}
	if ($PassWord != $getPass)
	{
		exec("sdc_cli profile $editprofile set password $PassWord", $error);
	}
	if ($PacFileName != $getPacFile)
	{
		exec("sdc_cli profile $editprofile set pacfilename $PacFileName", $error);
	}
	if ($PacPassword != $getPacPass)
	{
		exec("sdc_cli profile $editprofile set pacpassword $PacPassword", $error);
	}
	if ($UserCert != $getUserCertFile)
	{
		exec("sdc_cli profile $editprofile set usercert $UserCert", $error);
	}	
	if ($UserCertPass != $getUserCertPass)
	{
		exec("sdc_cli profile $editprofile set usercert_password $UserCertPass", $error);
	}
	if ($CaCert != $getCAFile)
	{
		exec("sdc_cli profile $editprofile set cacert $CaCert", $error);
	}

	if ($WepKey1 != $getWEPKey1)
	{
		if (strlen($WepKey1) == 5 || strlen($WepKey1) == 13 || strlen($WepKey1) == 10 || strlen($WepKey1) == 26)
		{
			exec("sdc_cli profile $editprofile set wep $WepKey1 1", $error);
		}
		else if (strlen($WepKey3) == 0)
		{
			exec("sdc_cli profile $editprofile set wep rm 1", $error);		
		}
		else
		{
			?>
			<script>
			alert("Error Setting Index 1:\n\nHex keys are 10 or 26 digits.\nASCII keys are 5 or 13 characters.");
			</script>
			<?php
		}
	}

	if ($WepKey2 != $getWEPKey2)
	{
		if (strlen($WepKey2) == 5 || strlen($WepKey2) == 13 || strlen($WepKey2) == 10 || strlen($WepKey2) == 26)
		{
			exec("sdc_cli profile $editprofile set wep $WepKey2 2", $error);
		}
		else if (strlen($WepKey2) == 0)
		{
			exec("sdc_cli profile $editprofile set wep rm 2", $error);		
		}
		else
		{
			?>
			<script>
			alert("Error Setting Index 2:\n\nHex keys are 10 or 26 digits.\nASCII keys are 5 or 13 characters.");
			</script>
			<?php
		}
	}

	if ($WepKey3 != $getWEPKey3)
	{
		if (strlen($WepKey3) == 5 || strlen($WepKey3) == 13 || strlen($WepKey3) == 10 || strlen($WepKey3) == 26)
		{
			exec("sdc_cli profile $editprofile set wep $WepKey3 3", $error);
		}
		else if (strlen($WepKey3) == 0)
		{
			exec("sdc_cli profile $editprofile set wep rm 3", $error);		
		}
		else
		{
			?>
			<script>
			alert("Error Setting Index 3:\n\nHex keys are 10 or 26 digits.\nASCII keys are 5 or 13 characters.");
			</script>
			<?php
		}
	}

	if ($WepKey4 != $getWEPKey4)
	{
		if (strlen($WepKey4) == 5 || strlen($WepKey4) == 13 || strlen($WepKey4) == 10 || strlen($WepKey4) == 26)
		{
			exec("sdc_cli profile $editprofile set wep $WepKey4 4", $error);
		}
		else if (strlen($WepKey4) == 0)
		{
			exec("sdc_cli profile $editprofile set wep rm 4", $error);		
		}
		else
		{
			?>
			<script>
			alert("Error Setting Index 4:\n\nHex keys are 10 or 26 digits.\nASCII keys are 5 or 13 characters.");
			</script>
			<?php
		}
	}

	if ($KeyIndex != $GetActiveKey)
	{	
		exec("sdc_cli profile $editprofile set wep tx $KeyIndex", $error);
	}

	if ($PSK != $getPSK)
	{
		if (strlen($PSK) >= 8 && strlen($PSK) <= 63)
		{
			exec("sdc_cli profile $editprofile set psk $PSK", $error);
		}
		else
		{
			?>
			<script>
			alert("PSK needs to be between 8 and 64 characters");
			</script>
			<?php
		}
	}
	
	echo "<form id=refresh action='' method = 'post'>";
	echo "<input type = 'hidden' name = 'wbprofiles' value = '$editprofile' />";
	echo "<input type = 'hidden' name = 'formEdit' value = '$formeditprofile' />";
	echo "</form>";
	echo "<script>document.getElementById('refresh').submit();</script>";
	
}
?>
</div>
</div>

</body>
</html>
