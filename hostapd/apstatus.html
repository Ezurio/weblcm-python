
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">
		<link rel="shortcut icon" href="../../assets/ico/favicon.ico">

		<title>AP Mode DEV</title>

		<!-- Bootstrap core CSS -->
		<link href="../assets/css/bootstrap.min.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<style>
		.sidebar {
		  display: none;
		}
		@media (min-width: 768px) {
		  .sidebar {
			position: fixed;
			top: 0px;
			bottom: 0;
			left: 0;
			z-index: 1000;
			display: block;
			padding: 20px;
			overflow-x: hidden;
			overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
			background-color: #f5f5f5;
			border-right: 1px solid #eee;
		  }
		}
		.nav-sidebar {
		  margin-right: -21px; /* 20px padding + 1px border */
		  margin-bottom: 20px;
		  margin-left: -20px;
		}
		.nav-sidebar > li > a {
		  padding-right: 20px;
		  padding-left: 20px;
		}
		.nav-sidebar > .active > a {
		  color: #fff;
		  background-color: #428bca;
		}
		.main {
		  padding: 20px;
		}
		@media (min-width: 768px) {
		  .main {
			padding-right: 40px;
			padding-left: 40px;
		  }
		}
		.main .page-header {
		  margin-top: 0;
		}
		</style>
	</head>

	<body>
    <div class="container-fluid">
		<div class="row">
			<div class="col-sm-3 col-md-2 sidebar">
			    <ul class="nav nav-sidebar">
					<li class="sidebar-brand"><a>WB AP Mode</a>
					</li>
					<li class="active"><a href="/apstatus.html">Status</a>
					</li>
					<li><a href="/apconfig.html">Configuration</a>
					</li>
					<li><a href="">Logging</a>
					</li>
				</ul>
			</div>
			<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
			<h1 class="page-header">AP Status</h1>
			</div>
			<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
				<?php
				exec('hostapd_cli -i wlan0 get_config', $cli_get_config);
				exec('hostapd_cli -i wlan0 all_sta', $cli_all_sta);
				exec('pidof hostapd', $pidof_hostapd, $pidof_hostapd_int);
				if ($pidof_hostapd_int == 0)
				{
					for ($i = 0; $i <= count($cli_get_config); $i ++)
					{
						if (substr($cli_get_config[$i],0,6) == "bssid=")
							{
								?>
								<div class="panel panel-info">
									<div class="panel-heading">
										<h3 class="panel-title">BSSID</h3>
									</div>
									<div class="panel-body">
										<?php
										echo substr($cli_get_config[$i],6);
										?>
									</div>
								</div>
								<?php
							}
						if (substr($cli_get_config[$i],0,5) == "ssid=")
							{
								?>
								<div class="panel panel-info">
									<div class="panel-heading">
										<h3 class="panel-title">SSID</h3>
									</div>
									<div class="panel-body">
										<?php
										echo substr($cli_get_config[$i],5);
										?>
									</div>
								</div>
								<?php
							}
					}
					?>
					<div class="panel panel-info">
						<div class="panel-heading">
							<h3 class="panel-title">Clients</h3>
						</div>
						<div class="panel-body">
							<?php
							for ($i = 0; $i <= count($cli_all_sta); $i ++)
							{
								echo $cli_all_sta[$i];
								echo "<br>";						
							}
							?>
						</div>
					</div>
					<?php
				}
				else
				{
					?>
					<div class="alert alert-danger"><strong>Warning!</strong> Hostapd is not running</div>
					<?php
				}
				?>
			</div>
		</div>
	</div>
	
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/bootstrap.min.js"></script>
  </body>
</html>
